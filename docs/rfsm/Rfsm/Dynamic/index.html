<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Dynamic (rfsm.Rfsm.Dynamic)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.1.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../index.html">rfsm</a> &#x00BB; <a href="../index.html">Rfsm</a> &#x00BB; Dynamic</nav><header class="odoc-preamble"><h1>Module <code><span>Rfsm.Dynamic</span></code></h1><p>Dynamic models (used by the simulator)</p></header><nav class="odoc-toc"><ul><li><a href="#fsm">FSM</a></li><li><a href="#local-evaluation-environment">Local evaluation environment</a></li><li><a href="#global-evaluation-environment">Global evaluation environment</a></li><li><a href="#builders">Builders</a></li><li><a href="#exceptions">Exceptions</a></li><li><a href="#accessors">Accessors</a></li><li><a href="#simulation">Simulation</a></li></ul></nav><div class="odoc-content"><h4 id="fsm"><a href="#fsm" class="anchor"></a>FSM</h4><div class="odoc-spec"><div class="spec type" id="type-fsm" class="anchored"><a href="#type-fsm" class="anchor"></a><code><span><span class="keyword">type</span> fsm</span><span> = </span><span>{</span></code><table><tr id="type-fsm.f_static" class="anchored"><td class="def record field"><a href="#type-fsm.f_static" class="anchor"></a><code><span>f_static : <a href="../Fsm/index.html#type-inst">Fsm.inst</a>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Static representation</p><span class="comment-delim">*)</span></td></tr><tr id="type-fsm.f_vars" class="anchored"><td class="def record field"><a href="#type-fsm.f_vars" class="anchor"></a><code><span>f_vars : <span><span>(string * <span>(<a href="../Types/index.html#type-typ">Types.typ</a> * <a href="../Expr/index.html#type-value">Expr.value</a>)</span>)</span> list</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>name, (type, value)</p><span class="comment-delim">*)</span></td></tr><tr id="type-fsm.f_state" class="anchored"><td class="def record field"><a href="#type-fsm.f_state" class="anchor"></a><code><span>f_state : string;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Current state</p><span class="comment-delim">*)</span></td></tr><tr id="type-fsm.f_has_reacted" class="anchored"><td class="def record field"><a href="#type-fsm.f_has_reacted" class="anchor"></a><code><span>f_has_reacted : bool;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>true when implied in the last reaction</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div></div><h4 id="local-evaluation-environment"><a href="#local-evaluation-environment" class="anchor"></a>Local evaluation environment</h4><div class="odoc-spec"><div class="spec type" id="type-lenv" class="anchored"><a href="#type-lenv" class="anchor"></a><code><span><span class="keyword">type</span> lenv</span><span> = <span><span>(string * <a href="../Expr/index.html#type-value">Expr.value</a>)</span> list</span></span></code></div></div><h4 id="global-evaluation-environment"><a href="#global-evaluation-environment" class="anchor"></a>Global evaluation environment</h4><div class="odoc-spec"><div class="spec type" id="type-genv" class="anchored"><a href="#type-genv" class="anchor"></a><code><span><span class="keyword">type</span> genv</span><span> = </span><span>{</span></code><table><tr id="type-genv.fe_inputs" class="anchored"><td class="def record field"><a href="#type-genv.fe_inputs" class="anchor"></a><code><span>fe_inputs : <span><span>(string * <span>(<a href="../Types/index.html#type-typ">Types.typ</a> * <a href="../Expr/index.html#type-value">Expr.value</a>)</span>)</span> list</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Global inputs</p><span class="comment-delim">*)</span></td></tr><tr id="type-genv.fe_csts" class="anchored"><td class="def record field"><a href="#type-genv.fe_csts" class="anchor"></a><code><span>fe_csts : <span><span>(string * <span>(<a href="../Types/index.html#type-typ">Types.typ</a> * <a href="../Expr/index.html#type-value">Expr.value</a>)</span>)</span> list</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Global constants</p><span class="comment-delim">*)</span></td></tr><tr id="type-genv.fe_fns" class="anchored"><td class="def record field"><a href="#type-genv.fe_fns" class="anchor"></a><code><span>fe_fns : <span><span>(string * <span>(<a href="../Types/index.html#type-typ">Types.typ</a> * <a href="../Expr/index.html#type-value">Expr.value</a>)</span>)</span> list</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Global functions</p><span class="comment-delim">*)</span></td></tr><tr id="type-genv.fe_vars" class="anchored"><td class="def record field"><a href="#type-genv.fe_vars" class="anchor"></a><code><span>fe_vars : <span><span>(string * <span>(<a href="../Types/index.html#type-typ">Types.typ</a> * <a href="../Expr/index.html#type-value">Expr.value</a>)</span>)</span> list</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Shared variables</p><span class="comment-delim">*)</span></td></tr><tr id="type-genv.fe_evs" class="anchored"><td class="def record field"><a href="#type-genv.fe_evs" class="anchor"></a><code><span>fe_evs : <span><span>(string * <span>(<a href="../Types/index.html#type-typ">Types.typ</a> * <a href="../Expr/index.html#type-value">Expr.value</a>)</span>)</span> list</span>;</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Shared events</p><span class="comment-delim">*)</span></td></tr></table><code><span>}</span></code></div></div><h3 id="builders"><a href="#builders" class="anchor"></a>Builders</h3><div class="odoc-spec"><div class="spec value" id="val-make_fsm" class="anchored"><a href="#val-make_fsm" class="anchor"></a><code><span><span class="keyword">val</span> make_fsm : <span><a href="../Fsm/index.html#type-inst">Fsm.inst</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-fsm">fsm</a></span></code></div><div class="spec-doc"><p><code>create sf</code> creates a dynamic FSM instance from a static description <code>sf</code></p></div></div><p>Input and output events</p><div class="odoc-spec"><div class="spec type" id="type-event" class="anchored"><a href="#type-event" class="anchor"></a><code><span><span class="keyword">type</span> event</span><span> = <a href="#type-loc">loc</a> * <a href="../Expr/index.html#type-value">Expr.value</a></span></code></div><div class="spec-doc"><p>Event location, new value</p></div></div><div class="odoc-spec"><div class="spec type" id="type-loc" class="anchored"><a href="#type-loc" class="anchor"></a><code><span><span class="keyword">and</span> loc</span><span> = </span></code><table><tr id="type-loc.LVar" class="anchored"><td class="def variant constructor"><a href="#type-loc.LVar" class="anchor"></a><code><span>| </span><span><span class="constructor">LVar</span> <span class="keyword">of</span> <a href="../Ident/index.html#type-t">Ident.t</a></span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Scalar</p><span class="comment-delim">*)</span></td></tr><tr id="type-loc.LArrInd" class="anchored"><td class="def variant constructor"><a href="#type-loc.LArrInd" class="anchor"></a><code><span>| </span><span><span class="constructor">LArrInd</span> <span class="keyword">of</span> <a href="../Ident/index.html#type-t">Ident.t</a> * int</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>1D array location</p><span class="comment-delim">*)</span></td></tr><tr id="type-loc.LRField" class="anchored"><td class="def variant constructor"><a href="#type-loc.LRField" class="anchor"></a><code><span>| </span><span><span class="constructor">LRField</span> <span class="keyword">of</span> <a href="../Ident/index.html#type-t">Ident.t</a> * string</span></code></td><td class="def-doc"><span class="comment-delim">(*</span><p>Record field</p><span class="comment-delim">*)</span></td></tr></table></div></div><h3 id="exceptions"><a href="#exceptions" class="anchor"></a>Exceptions</h3><div class="odoc-spec"><div class="spec exception" id="exception-IllegalTrans" class="anchored"><a href="#exception-IllegalTrans" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">IllegalTrans</span> <span class="keyword">of</span> <a href="#type-fsm">fsm</a> * string</span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-IllegalAction" class="anchored"><a href="#exception-IllegalAction" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">IllegalAction</span> <span class="keyword">of</span> <a href="#type-fsm">fsm</a> * <a href="../Action/index.html#type-t">Action.t</a></span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-Undeterminate" class="anchored"><a href="#exception-Undeterminate" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">Undeterminate</span> <span class="keyword">of</span> <a href="#type-fsm">fsm</a> * string * <a href="../Types/index.html#type-date">Types.date</a></span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-NonDetTrans" class="anchored"><a href="#exception-NonDetTrans" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">NonDetTrans</span> <span class="keyword">of</span> <a href="#type-fsm">fsm</a> * <span><a href="../Fsm/index.html#type-transition">Fsm.transition</a> list</span> * <a href="../Types/index.html#type-date">Types.date</a></span></code></div></div><div class="odoc-spec"><div class="spec exception" id="exception-NonAtomicIoWrite" class="anchored"><a href="#exception-NonAtomicIoWrite" class="anchor"></a><code><span><span class="keyword">exception</span> </span><span><span class="exception">NonAtomicIoWrite</span> <span class="keyword">of</span> <a href="#type-fsm">fsm</a> * <a href="../Action/index.html#type-t">Action.t</a></span></code></div></div><h3 id="accessors"><a href="#accessors" class="anchor"></a>Accessors</h3><div class="odoc-spec"><div class="spec value" id="val-fireable" class="anchored"><a href="#val-fireable" class="anchor"></a><code><span><span class="keyword">val</span> fireable : <span><a href="#type-fsm">fsm</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-lenv">lenv</a> <span class="arrow">&#45;&gt;</span></span> <span><span class="xref-unresolved">Rfsm</span>.Fsm.Repr.transition <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>fireable f env t</code> returns <code>true</code> iff transition <code>t</code> in FSM <code>f</code> is fireable, given ocal env <code>env</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-check_cond" class="anchored"><a href="#val-check_cond" class="anchor"></a><code><span><span class="keyword">val</span> check_cond : <span><a href="#type-fsm">fsm</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-lenv">lenv</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Condition/index.html#type-t">Condition.t</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>check_cond f env c</code> evaluatues condition <code>c</code> in FSM <code>f</code>, in the context of local env <code>env</code>.</p></div></div><div class="odoc-spec"><div class="spec value" id="val-is_event_set" class="anchored"><a href="#val-is_event_set" class="anchor"></a><code><span><span class="keyword">val</span> is_event_set : <span><a href="#type-lenv">lenv</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Condition/index.html#type-event">Condition.event</a> <span class="arrow">&#45;&gt;</span></span> bool</span></code></div><div class="spec-doc"><p><code>is_event_set env ev</code> indicates whether event <code>ev</code> is set in local environment <code>env</code></p></div></div><h3 id="simulation"><a href="#simulation" class="anchor"></a>Simulation</h3><div class="odoc-spec"><div class="spec value" id="val-init" class="anchored"><a href="#val-init" class="anchor"></a><code><span><span class="keyword">val</span> init : <span><a href="#type-genv">genv</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-fsm">fsm</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-fsm">fsm</a> * <span><a href="#type-event">event</a> list</span></span></code></div><div class="spec-doc"><p><code>init env f</code> performs the initial transition of FSM <code>f</code>, in global environment <code>env</code>, Returns an updated fsm and list of events consisting of</p><ul><li>updates to global outputs or shared objects</li><li>updates to local variables (including state move)</li></ul></div></div><div class="odoc-spec"><div class="spec value" id="val-react" class="anchored"><a href="#val-react" class="anchor"></a><code><span><span class="keyword">val</span> react : <span><a href="../Types/index.html#type-date">Types.date</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-genv">genv</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-fsm">fsm</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-fsm">fsm</a> * <span><a href="#type-event">event</a> list</span></span></code></div><div class="spec-doc"><p><code>react t env f</code> compute the reaction, at time <code>t</code> of FSM <code>f</code> in global environment <code>env</code>. The global environment contains the values of global inputs, shared objects and global functions/constants. As for <code>init</code>, returns an updated fsm and list of events.</p></div></div></div></body></html>