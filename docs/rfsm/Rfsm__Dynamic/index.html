<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Rfsm__Dynamic (rfsm.Rfsm__Dynamic)</title><link rel="stylesheet" href="../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.1"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../index.html">rfsm</a> &#x00BB; Rfsm__Dynamic</nav><h1>Module <code>Rfsm__Dynamic</code></h1><p>Dynamic models (used by the simulator)</p><nav class="toc"><ul><li><a href="#fsm">FSM</a></li><li><a href="#local-evaluation-environment">Local evaluation environment</a></li><li><a href="#global-evaluation-environment">Global evaluation environment</a></li><li><a href="#builders">Builders</a></li><li><a href="#exceptions">Exceptions</a></li><li><a href="#accessors">Accessors</a></li><li><a href="#simulation">Simulation</a></li></ul></nav></header><section><header><h4 id="fsm"><a href="#fsm" class="anchor"></a>FSM</h4></header><dl><dt class="spec type" id="type-fsm"><a href="#type-fsm" class="anchor"></a><code><span class="keyword">type</span> fsm</code><code> = </code><code>{</code><table class="record"><tr id="type-fsm.f_static" class="anchored"><td class="def field"><a href="#type-fsm.f_static" class="anchor"></a><code>f_static : <a href="../Rfsm/Fsm/index.html#type-inst">Rfsm.Fsm.inst</a>;</code></td><td class="doc"><p>Static representation</p></td></tr><tr id="type-fsm.f_vars" class="anchored"><td class="def field"><a href="#type-fsm.f_vars" class="anchor"></a><code>f_vars : <span><span>(string * <span>(<a href="../Rfsm/Types/index.html#type-typ">Rfsm.Types.typ</a> * <a href="../Rfsm/Expr/index.html#type-value">Rfsm.Expr.value</a>)</span>)</span> list</span>;</code></td><td class="doc"><p>name, (type, value)</p></td></tr><tr id="type-fsm.f_state" class="anchored"><td class="def field"><a href="#type-fsm.f_state" class="anchor"></a><code>f_state : string;</code></td><td class="doc"><p>Current state</p></td></tr><tr id="type-fsm.f_has_reacted" class="anchored"><td class="def field"><a href="#type-fsm.f_has_reacted" class="anchor"></a><code>f_has_reacted : bool;</code></td><td class="doc"><p>true when implied in the last reaction</p></td></tr></table><code>}</code></dt></dl></section><section><header><h4 id="local-evaluation-environment"><a href="#local-evaluation-environment" class="anchor"></a>Local evaluation environment</h4></header><dl><dt class="spec type" id="type-lenv"><a href="#type-lenv" class="anchor"></a><code><span class="keyword">type</span> lenv</code><code> = <span><span>(string * <a href="../Rfsm/Expr/index.html#type-value">Rfsm.Expr.value</a>)</span> list</span></code></dt></dl></section><section><header><h4 id="global-evaluation-environment"><a href="#global-evaluation-environment" class="anchor"></a>Global evaluation environment</h4></header><dl><dt class="spec type" id="type-genv"><a href="#type-genv" class="anchor"></a><code><span class="keyword">type</span> genv</code><code> = </code><code>{</code><table class="record"><tr id="type-genv.fe_inputs" class="anchored"><td class="def field"><a href="#type-genv.fe_inputs" class="anchor"></a><code>fe_inputs : <span><span>(string * <span>(<a href="../Rfsm/Types/index.html#type-typ">Rfsm.Types.typ</a> * <a href="../Rfsm/Expr/index.html#type-value">Rfsm.Expr.value</a>)</span>)</span> list</span>;</code></td><td class="doc"><p>Global inputs</p></td></tr><tr id="type-genv.fe_csts" class="anchored"><td class="def field"><a href="#type-genv.fe_csts" class="anchor"></a><code>fe_csts : <span><span>(string * <span>(<a href="../Rfsm/Types/index.html#type-typ">Rfsm.Types.typ</a> * <a href="../Rfsm/Expr/index.html#type-value">Rfsm.Expr.value</a>)</span>)</span> list</span>;</code></td><td class="doc"><p>Global constants</p></td></tr><tr id="type-genv.fe_fns" class="anchored"><td class="def field"><a href="#type-genv.fe_fns" class="anchor"></a><code>fe_fns : <span><span>(string * <span>(<a href="../Rfsm/Types/index.html#type-typ">Rfsm.Types.typ</a> * <a href="../Rfsm/Expr/index.html#type-value">Rfsm.Expr.value</a>)</span>)</span> list</span>;</code></td><td class="doc"><p>Global functions</p></td></tr><tr id="type-genv.fe_vars" class="anchored"><td class="def field"><a href="#type-genv.fe_vars" class="anchor"></a><code>fe_vars : <span><span>(string * <span>(<a href="../Rfsm/Types/index.html#type-typ">Rfsm.Types.typ</a> * <a href="../Rfsm/Expr/index.html#type-value">Rfsm.Expr.value</a>)</span>)</span> list</span>;</code></td><td class="doc"><p>Shared variables</p></td></tr><tr id="type-genv.fe_evs" class="anchored"><td class="def field"><a href="#type-genv.fe_evs" class="anchor"></a><code>fe_evs : <span><span>(string * <span>(<a href="../Rfsm/Types/index.html#type-typ">Rfsm.Types.typ</a> * <a href="../Rfsm/Expr/index.html#type-value">Rfsm.Expr.value</a>)</span>)</span> list</span>;</code></td><td class="doc"><p>Shared events</p></td></tr></table><code>}</code></dt></dl></section><section><header><h3 id="builders"><a href="#builders" class="anchor"></a>Builders</h3></header><dl><dt class="spec value" id="val-make_fsm"><a href="#val-make_fsm" class="anchor"></a><code><span class="keyword">val</span> make_fsm : <a href="../Rfsm/Fsm/index.html#type-inst">Rfsm.Fsm.inst</a> <span>&#45;&gt;</span> <a href="index.html#type-fsm">fsm</a></code></dt><dd><p><code>create sf</code> creates a dynamic FSM instance from a static description <code>sf</code></p></dd></dl><aside><p>Input and output events</p></aside><dl><dt class="spec type" id="type-event"><a href="#type-event" class="anchor"></a><code><span class="keyword">type</span> event</code><code> = <a href="index.html#type-loc">loc</a> * <a href="../Rfsm/Expr/index.html#type-value">Rfsm.Expr.value</a></code></dt><dd><p>Event location, new value</p></dd></dl><dl><dt class="spec type" id="type-loc"><a href="#type-loc" class="anchor"></a><code><span class="keyword">and</span> loc</code><code> = </code><table class="variant"><tr id="type-loc.LVar" class="anchored"><td class="def constructor"><a href="#type-loc.LVar" class="anchor"></a><code>| </code><code><span class="constructor">LVar</span> <span class="keyword">of</span> <a href="../Rfsm/Ident/index.html#type-t">Rfsm.Ident.t</a></code></td><td class="doc"><p>Scalar</p></td></tr><tr id="type-loc.LArrInd" class="anchored"><td class="def constructor"><a href="#type-loc.LArrInd" class="anchor"></a><code>| </code><code><span class="constructor">LArrInd</span> <span class="keyword">of</span> <a href="../Rfsm/Ident/index.html#type-t">Rfsm.Ident.t</a> * int</code></td><td class="doc"><p>1D array location</p></td></tr><tr id="type-loc.LRField" class="anchored"><td class="def constructor"><a href="#type-loc.LRField" class="anchor"></a><code>| </code><code><span class="constructor">LRField</span> <span class="keyword">of</span> <a href="../Rfsm/Ident/index.html#type-t">Rfsm.Ident.t</a> * string</code></td><td class="doc"><p>Record field</p></td></tr></table></dt></dl></section><section><header><h3 id="exceptions"><a href="#exceptions" class="anchor"></a>Exceptions</h3></header><dl><dt class="spec exception" id="exception-IllegalTrans"><a href="#exception-IllegalTrans" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">IllegalTrans</span> <span class="keyword">of</span> <a href="index.html#type-fsm">fsm</a> * string</code></dt><dt class="spec exception" id="exception-IllegalAction"><a href="#exception-IllegalAction" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">IllegalAction</span> <span class="keyword">of</span> <a href="index.html#type-fsm">fsm</a> * <a href="../Rfsm/Action/index.html#type-t">Rfsm.Action.t</a></code></dt><dt class="spec exception" id="exception-Undeterminate"><a href="#exception-Undeterminate" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">Undeterminate</span> <span class="keyword">of</span> <a href="index.html#type-fsm">fsm</a> * string * <a href="../Rfsm/Types/index.html#type-date">Rfsm.Types.date</a></code></dt><dt class="spec exception" id="exception-NonDetTrans"><a href="#exception-NonDetTrans" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">NonDetTrans</span> <span class="keyword">of</span> <a href="index.html#type-fsm">fsm</a> * <span><a href="../Rfsm/Fsm/index.html#type-transition">Rfsm.Fsm.transition</a> list</span> * <a href="../Rfsm/Types/index.html#type-date">Rfsm.Types.date</a></code></dt><dt class="spec exception" id="exception-NonAtomicIoWrite"><a href="#exception-NonAtomicIoWrite" class="anchor"></a><code><span class="keyword">exception</span> </code><code><span class="exception">NonAtomicIoWrite</span> <span class="keyword">of</span> <a href="index.html#type-fsm">fsm</a> * <a href="../Rfsm/Action/index.html#type-t">Rfsm.Action.t</a></code></dt></dl></section><section><header><h3 id="accessors"><a href="#accessors" class="anchor"></a>Accessors</h3></header><dl><dt class="spec value" id="val-fireable"><a href="#val-fireable" class="anchor"></a><code><span class="keyword">val</span> fireable : <a href="index.html#type-fsm">fsm</a> <span>&#45;&gt;</span> <a href="index.html#type-lenv">lenv</a> <span>&#45;&gt;</span> <a href="../Rfsm__Fsm/index.html#module-Repr">Rfsm.Fsm.Repr</a>.transition <span>&#45;&gt;</span> bool</code></dt><dd><p><code>fireable f env t</code> returns <code>true</code> iff transition <code>t</code> in FSM <code>f</code> is fireable, given ocal env <code>env</code>.</p></dd></dl><dl><dt class="spec value" id="val-check_cond"><a href="#val-check_cond" class="anchor"></a><code><span class="keyword">val</span> check_cond : <a href="index.html#type-fsm">fsm</a> <span>&#45;&gt;</span> <a href="index.html#type-lenv">lenv</a> <span>&#45;&gt;</span> <a href="../Rfsm/Condition/index.html#type-t">Rfsm.Condition.t</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>check_cond f env c</code> evaluatues condition <code>c</code> in FSM <code>f</code>, in the context of local env <code>env</code>.</p></dd></dl><dl><dt class="spec value" id="val-is_event_set"><a href="#val-is_event_set" class="anchor"></a><code><span class="keyword">val</span> is_event_set : <a href="index.html#type-lenv">lenv</a> <span>&#45;&gt;</span> <a href="../Rfsm/Condition/index.html#type-event">Rfsm.Condition.event</a> <span>&#45;&gt;</span> bool</code></dt><dd><p><code>is_event_set env ev</code> indicates whether event <code>ev</code> is set in local environment <code>env</code></p></dd></dl></section><section><header><h3 id="simulation"><a href="#simulation" class="anchor"></a>Simulation</h3></header><dl><dt class="spec value" id="val-init"><a href="#val-init" class="anchor"></a><code><span class="keyword">val</span> init : <a href="index.html#type-genv">genv</a> <span>&#45;&gt;</span> <a href="index.html#type-fsm">fsm</a> <span>&#45;&gt;</span> <a href="index.html#type-fsm">fsm</a> * <span><a href="index.html#type-event">event</a> list</span></code></dt><dd><p><code>init env f</code> performs the initial transition of FSM <code>f</code>, in global environment <code>env</code>, Returns an updated fsm and list of events consisting of</p><ul><li>updates to global outputs or shared objects</li><li>updates to local variables (including state move)</li></ul></dd></dl><dl><dt class="spec value" id="val-react"><a href="#val-react" class="anchor"></a><code><span class="keyword">val</span> react : <a href="../Rfsm/Types/index.html#type-date">Rfsm.Types.date</a> <span>&#45;&gt;</span> <a href="index.html#type-genv">genv</a> <span>&#45;&gt;</span> <a href="index.html#type-fsm">fsm</a> <span>&#45;&gt;</span> <a href="index.html#type-fsm">fsm</a> * <span><a href="index.html#type-event">event</a> list</span></code></dt><dd><p><code>react t env f</code> compute the reaction, at time <code>t</code> of FSM <code>f</code> in global environment <code>env</code>. The global environment contains the values of global inputs, shared objects and global functions/constants. As for <code>init</code>, returns an updated fsm and list of events.</p></dd></dl></section></div></body></html>