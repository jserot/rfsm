\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{grammar-defns}

\RequirePackage{suffix}
\RequirePackage{longtable}
\RequirePackage{tabu}

\newenvironment{rfsmgrammar}{
  \begin{trivlist}
    \item[]
      \begin{longtabu}{r@{}c@{}X@{}}
}{
      \end{longtabu}
  \end{trivlist}
}

\newcommand\rfsmgramsp{\quad}
\newcommand\rfsmgramdef{$\rfsmgramsp::=\rfsmgramsp$}
\newcommand\rfsmgrambar{$\rfsmgramsp|\rfsmgramsp$}
\newcommand\rfsmgrameps{\ensuremath{\epsilon}}
\newcommand\rfsmgramnonterm[1]{\ensuremath{\langle\textnormal{#1}\rangle}}
\newcommand\rfsmgramfunc[1]{\rfsmgramnonterm{#1}}
\newcommand\rfsmgramterm[1]{#1}

\newcommand\rfsmARROW{\Verb|\textbf{->}|}
\newcommand\rfsmBAR{\Verb+\textbf{|}+}
\newcommand\rfsmCHAR{\textbf{char}}
\newcommand\rfsmCOLEQ{\Verb|\textbf{:=}|}
\newcommand\rfsmCOLON{\Verb|\textbf{:}|}
\newcommand\rfsmCOLONCOLON{\Verb|\textbf{::}|}
\newcommand\rfsmCOMMA{\textbf{,}}
\newcommand\rfsmCONSTANT{\textbf{constant}}
\newcommand\rfsmDIV{\Verb|\textbf{/}|}
\newcommand\rfsmDOT{\textbf{.}}
\newcommand\rfsmENUM{\textbf{enum}}
\newcommand\rfsmEOF{}
\newcommand\rfsmEQUAL{\textbf{=}}
\newcommand\rfsmFDIV{\Verb|\textbf{/.}|}
\newcommand\rfsmFLOAT{\textbf{float}}
\newcommand\rfsmFMINUS{\Verb|\textbf{-.}|}
\newcommand\rfsmFPLUS{\Verb|\textbf{+.}|}
\newcommand\rfsmFSM{\textbf{fsm}}
\newcommand\rfsmFTIMES{\Verb|\textbf{*.}|}
\newcommand\rfsmFUNCTION{\textbf{function}}
\newcommand\rfsmGT{\Verb|\textbf{>}|}
\newcommand\rfsmGTE{\Verb|\textbf{>=}|}
\newcommand\rfsmIN{\textbf{in}}
\newcommand\rfsmINOUT{\textbf{inout}}
\newcommand\rfsmINPUT{\textbf{input}}
\newcommand\rfsmINT{\textbf{int}}
\newcommand\rfsmITRANS{\textbf{itrans}}
\newcommand\rfsmLAND{\Verb|\textbf{\&}|}
\newcommand\rfsmLBRACE{\Verb|\textbf{\{}|}
\newcommand\rfsmLBRACKET{\Verb|\textbf{[}|}
\newcommand\rfsmLID{lid}
\newcommand\rfsmLOR{\Verb|\textbf{||}|}
\newcommand\rfsmLPAREN{\Verb|\textbf{(}|}
\newcommand\rfsmLT{\Verb|\textbf{<}|}
\newcommand\rfsmLTE{\Verb|\textbf{<=}|}
\newcommand\rfsmLXOR{\Verb|\textbf{\^}|}
\newcommand\rfsmMINUS{\Verb|\textbf{-}|}
\newcommand\rfsmMOD{\Verb|\textbf{\%}|}
\newcommand\rfsmMODEL{\textbf{model}}
\newcommand\rfsmON{\textbf{on}}
\newcommand\rfsmWHEN{\textbf{when}}
\newcommand\rfsmWITH{\textbf{with}}
\newcommand\rfsmNOTEQUAL{\Verb|\textbf{!=}|}
\newcommand\rfsmOUT{\textbf{out}}
\newcommand\rfsmOUTPUT{\textbf{output}}
\newcommand\rfsmPERIODIC{\textbf{periodic}}
\newcommand\rfsmPLUS{\Verb|\textbf{+}|}
\newcommand\rfsmQMARK{\Verb|\textbf{?}|}
\newcommand\rfsmEMARK{\Verb|\textbf{!}|}
\newcommand\rfsmRBRACE{\Verb|\textbf{\}}|}
\newcommand\rfsmRBRACKET{\Verb|\textbf{]}|}
\newcommand\rfsmRECORD{\textbf{record}}
\newcommand\rfsmRETURN{\textbf{return}}
\newcommand\rfsmRPAREN{\Verb|\textbf{)}|}
\newcommand\rfsmSEMICOLON{\Verb|\textbf{;}|}
\newcommand\rfsmSHARED{\textbf{shared}}
\newcommand\rfsmSHL{\Verb|\textbf{<<}|}
\newcommand\rfsmSHR{\Verb|\textbf{>>}|}
\newcommand\rfsmSPORADIC{\textbf{sporadic}}
\newcommand\rfsmSTATES{\textbf{states}}
\newcommand\rfsmTIMES{\Verb|\textbf{*}|}
\newcommand\rfsmTRANS{\textbf{trans}}
\newcommand\rfsmTYARRAY{\textbf{array}}
\newcommand\rfsmTYBOOL{\textbf{bool}}
\newcommand\rfsmTYCHAR{\textbf{char}}
\newcommand\rfsmTYEVENT{\textbf{event}}
\newcommand\rfsmTYFLOAT{\textbf{float}}
\newcommand\rfsmTYINT{\textbf{int}}
\newcommand\rfsmTYPE{\textbf{type}}
\newcommand\rfsmUID{uid}
\newcommand\rfsmVALUECHANGES{\textbf{value\_changes}}
\newcommand\rfsmVARS{\textbf{vars}}
\newcommand\rfsmaction{action}
\newcommand\rfsmactions{actions}
\newcommand\rfsmarrayconst{array\_const}
\newcommand\rfsmarraysize{array\_size}
\newcommand\rfsmbraced[1]{\rfsmLBRACE\ #1\ \rfsmRBRACE}
\newcommand\rfsmcharconst{char\_const}
\newcommand\rfsmguard{guard}
\newcommand\rfsmtranshdr{trans\_mark}
\newcommand\rfsmconst{const}
\newcommand\rfsmconstant{constant}
\newcommand\rfsmcstdecl{cst\_decl}
\newcommand\rfsmdecl{decl}
\newcommand\rfsmexpr{expr}
\newcommand\rfsmfarg{farg}
\newcommand\rfsmfbody{fbody}
\newcommand\rfsmfloatconst{float\_const}
\newcommand\rfsmfndecl{fn\_decl}
\newcommand\rfsmfres{fres}
\newcommand\rfsmfsminst{fsm\_inst}
\newcommand\rfsmfsmmodel{fsm\_model}
\newcommand\rfsmglobal{global}
\newcommand\rfsmid{id}
\newcommand\rfsminstparamvalue{inst\_param\_value}
\newcommand\rfsmintannot{int\_annot}
\newcommand\rfsmintconst{int\_const}
\newcommand\rfsmio{io}
\newcommand\rfsmiodesc{io\_desc}
\newcommand\rfsmitransition{itransition}
\newcommand\rfsmlhs{lhs}
\newcommand\rfsmmylist{my\_list}
\newcommand\rfsmmynonemptylist{my\_nonempty\_list}
\newcommand\rfsmmyseparatedlist{my\_separated\_list}
\newcommand\rfsmmyseparatednonemptylist{my\_separated\_nonempty\_list}
\newcommand\rfsmoptinstparams{opt\_inst\_params}
\newcommand\rfsmoptional{optional}
\newcommand\rfsmparam{param}
\newcommand\rfsmparams{params}
\newcommand\rfsmparen[1]{\rfsmLPAREN\ #1\ \rfsmRPAREN}
\newcommand\rfsmprio{prio}
\newcommand\rfsmprogram{program}
\newcommand\rfsmrecordconst{record\_const}
\newcommand\rfsmrecordfield{record\_field}
\newcommand\rfsmrecordfieldconst{record\_field\_const}
\newcommand\rfsmscalarconst{scalar\_const}
\newcommand\rfsmsimpleexpr{simple\_expr}
\newcommand\rfsmstimuli{stimuli}
\newcommand\rfsmsubtractive{subtractive}
\newcommand\rfsmtransition{transition}
\newcommand\rfsmtypedecl{type\_decl}
\newcommand\rfsmtypeexpr{type\_expr}
\newcommand\rfsmtypeindexexpr{type\_index\_expr}
\newcommand\rfsmvaluechange{value\_change}
\newcommand\rfsmvar{var}
\newcommand\rfsmvars{vars}
\WithSuffix\newcommand\rfsmARROW*{\rfsmgramterm{\rfsmARROW}}
\WithSuffix\newcommand\rfsmBAR*{\rfsmgramterm{\rfsmBAR}}
\WithSuffix\newcommand\rfsmCHAR*{\rfsmgramterm{\rfsmCHAR}}
\WithSuffix\newcommand\rfsmCOLEQ*{\rfsmgramterm{\rfsmCOLEQ}}
\WithSuffix\newcommand\rfsmCOLON*{\rfsmgramterm{\rfsmCOLON}}
\WithSuffix\newcommand\rfsmCOLONCOLON*{\rfsmgramterm{\rfsmCOLONCOLON}}
\WithSuffix\newcommand\rfsmCOMMA*{\rfsmgramterm{\rfsmCOMMA}}
\WithSuffix\newcommand\rfsmCONSTANT*{\rfsmgramterm{\rfsmCONSTANT}}
\WithSuffix\newcommand\rfsmDIV*{\rfsmgramterm{\rfsmDIV}}
\WithSuffix\newcommand\rfsmDOT*{\rfsmgramterm{\rfsmDOT}}
\WithSuffix\newcommand\rfsmENUM*{\rfsmgramterm{\rfsmENUM}}
\WithSuffix\newcommand\rfsmEOF*{\rfsmgramterm{\rfsmEOF}}
\WithSuffix\newcommand\rfsmEQUAL*{\rfsmgramterm{\rfsmEQUAL}}
\WithSuffix\newcommand\rfsmFDIV*{\rfsmgramterm{\rfsmFDIV}}
\WithSuffix\newcommand\rfsmFLOAT*{\rfsmgramterm{\rfsmFLOAT}}
\WithSuffix\newcommand\rfsmFMINUS*{\rfsmgramterm{\rfsmFMINUS}}
\WithSuffix\newcommand\rfsmFPLUS*{\rfsmgramterm{\rfsmFPLUS}}
\WithSuffix\newcommand\rfsmFSM*{\rfsmgramterm{\rfsmFSM}}
\WithSuffix\newcommand\rfsmFTIMES*{\rfsmgramterm{\rfsmFTIMES}}
\WithSuffix\newcommand\rfsmFUNCTION*{\rfsmgramterm{\rfsmFUNCTION}}
\WithSuffix\newcommand\rfsmGT*{\rfsmgramterm{\rfsmGT}}
\WithSuffix\newcommand\rfsmGTE*{\rfsmgramterm{\rfsmGTE}}
\WithSuffix\newcommand\rfsmIN*{\rfsmgramterm{\rfsmIN}}
\WithSuffix\newcommand\rfsmINOUT*{\rfsmgramterm{\rfsmINOUT}}
\WithSuffix\newcommand\rfsmINPUT*{\rfsmgramterm{\rfsmINPUT}}
\WithSuffix\newcommand\rfsmINT*{\rfsmgramterm{\rfsmINT}}
\WithSuffix\newcommand\rfsmITRANS*{\rfsmgramterm{\rfsmITRANS}}
\WithSuffix\newcommand\rfsmLAND*{\rfsmgramterm{\rfsmLAND}}
\WithSuffix\newcommand\rfsmLBRACE*{\rfsmgramterm{\rfsmLBRACE}}
\WithSuffix\newcommand\rfsmLBRACKET*{\rfsmgramterm{\rfsmLBRACKET}}
\WithSuffix\newcommand\rfsmLID*{\rfsmgramterm{\rfsmLID}}
\WithSuffix\newcommand\rfsmLOR*{\rfsmgramterm{\rfsmLOR}}
\WithSuffix\newcommand\rfsmLPAREN*{\rfsmgramterm{\rfsmLPAREN}}
\WithSuffix\newcommand\rfsmLT*{\rfsmgramterm{\rfsmLT}}
\WithSuffix\newcommand\rfsmLTE*{\rfsmgramterm{\rfsmLTE}}
\WithSuffix\newcommand\rfsmLXOR*{\rfsmgramterm{\rfsmLXOR}}
\WithSuffix\newcommand\rfsmMINUS*{\rfsmgramterm{\rfsmMINUS}}
\WithSuffix\newcommand\rfsmMOD*{\rfsmgramterm{\rfsmMOD}}
\WithSuffix\newcommand\rfsmMODEL*{\rfsmgramterm{\rfsmMODEL}}
\WithSuffix\newcommand\rfsmON*{\rfsmgramterm{\rfsmON}}
\WithSuffix\newcommand\rfsmWHEN*{\rfsmgramterm{\rfsmWHEN}}
\WithSuffix\newcommand\rfsmWITH*{\rfsmgramterm{\rfsmWITH}}
\WithSuffix\newcommand\rfsmNOTEQUAL*{\rfsmgramterm{\rfsmNOTEQUAL}}
\WithSuffix\newcommand\rfsmOUT*{\rfsmgramterm{\rfsmOUT}}
\WithSuffix\newcommand\rfsmOUTPUT*{\rfsmgramterm{\rfsmOUTPUT}}
\WithSuffix\newcommand\rfsmPERIODIC*{\rfsmgramterm{\rfsmPERIODIC}}
\WithSuffix\newcommand\rfsmPLUS*{\rfsmgramterm{\rfsmPLUS}}
\WithSuffix\newcommand\rfsmQMARK*{\rfsmgramterm{\rfsmQMARK}}
\WithSuffix\newcommand\rfsmEMARK*{\rfsmgramterm{\rfsmEMARK}}
\WithSuffix\newcommand\rfsmRBRACE*{\rfsmgramterm{\rfsmRBRACE}}
\WithSuffix\newcommand\rfsmRBRACKET*{\rfsmgramterm{\rfsmRBRACKET}}
\WithSuffix\newcommand\rfsmRECORD*{\rfsmgramterm{\rfsmRECORD}}
\WithSuffix\newcommand\rfsmRETURN*{\rfsmgramterm{\rfsmRETURN}}
\WithSuffix\newcommand\rfsmRPAREN*{\rfsmgramterm{\rfsmRPAREN}}
\WithSuffix\newcommand\rfsmSEMICOLON*{\rfsmgramterm{\rfsmSEMICOLON}}
\WithSuffix\newcommand\rfsmSHARED*{\rfsmgramterm{\rfsmSHARED}}
\WithSuffix\newcommand\rfsmSHL*{\rfsmgramterm{\rfsmSHL}}
\WithSuffix\newcommand\rfsmSHR*{\rfsmgramterm{\rfsmSHR}}
\WithSuffix\newcommand\rfsmSPORADIC*{\rfsmgramterm{\rfsmSPORADIC}}
\WithSuffix\newcommand\rfsmSTATES*{\rfsmgramterm{\rfsmSTATES}}
\WithSuffix\newcommand\rfsmTIMES*{\rfsmgramterm{\rfsmTIMES}}
\WithSuffix\newcommand\rfsmTRANS*{\rfsmgramterm{\rfsmTRANS}}
\WithSuffix\newcommand\rfsmTYARRAY*{\rfsmgramterm{\rfsmTYARRAY}}
\WithSuffix\newcommand\rfsmTYBOOL*{\rfsmgramterm{\rfsmTYBOOL}}
\WithSuffix\newcommand\rfsmTYCHAR*{\rfsmgramterm{\rfsmTYCHAR}}
\WithSuffix\newcommand\rfsmTYEVENT*{\rfsmgramterm{\rfsmTYEVENT}}
\WithSuffix\newcommand\rfsmTYFLOAT*{\rfsmgramterm{\rfsmTYFLOAT}}
\WithSuffix\newcommand\rfsmTYINT*{\rfsmgramterm{\rfsmTYINT}}
\WithSuffix\newcommand\rfsmTYPE*{\rfsmgramterm{\rfsmTYPE}}
\WithSuffix\newcommand\rfsmUID*{\rfsmgramterm{\rfsmUID}}
\WithSuffix\newcommand\rfsmVALUECHANGES*{\rfsmgramterm{\rfsmVALUECHANGES}}
\WithSuffix\newcommand\rfsmVARS*{\rfsmgramterm{\rfsmVARS}}
\WithSuffix\newcommand\rfsmaction*{\rfsmgramnonterm{\rfsmaction}}
\WithSuffix\newcommand\rfsmactions*{\rfsmgramnonterm{\rfsmactions}}
\WithSuffix\newcommand\rfsmarrayconst*{\rfsmgramnonterm{\rfsmarrayconst}}
\WithSuffix\newcommand\rfsmarraysize*{\rfsmgramnonterm{\rfsmarraysize}}
\WithSuffix\newcommand\rfsmcharconst*{\rfsmgramnonterm{\rfsmcharconst}}
\WithSuffix\newcommand\rfsmguard*{\rfsmgramnonterm{\rfsmguard}}
\WithSuffix\newcommand\rfsmtranshdr*{\rfsmgramnonterm{\rfsmtranshdr}}
\WithSuffix\newcommand\rfsmconst*{\rfsmgramnonterm{\rfsmconst}}
\WithSuffix\newcommand\rfsmconstant*{\rfsmgramnonterm{\rfsmconstant}}
\WithSuffix\newcommand\rfsmcstdecl*{\rfsmgramnonterm{\rfsmcstdecl}}
\WithSuffix\newcommand\rfsmdecl*{\rfsmgramnonterm{\rfsmdecl}}
\WithSuffix\newcommand\rfsmexpr*{\rfsmgramnonterm{\rfsmexpr}}
\WithSuffix\newcommand\rfsmfarg*{\rfsmgramnonterm{\rfsmfarg}}
\WithSuffix\newcommand\rfsmfbody*{\rfsmgramnonterm{\rfsmfbody}}
\WithSuffix\newcommand\rfsmfloatconst*{\rfsmgramnonterm{\rfsmfloatconst}}
\WithSuffix\newcommand\rfsmfndecl*{\rfsmgramnonterm{\rfsmfndecl}}
\WithSuffix\newcommand\rfsmfres*{\rfsmgramnonterm{\rfsmfres}}
\WithSuffix\newcommand\rfsmfsminst*{\rfsmgramnonterm{\rfsmfsminst}}
\WithSuffix\newcommand\rfsmfsmmodel*{\rfsmgramnonterm{\rfsmfsmmodel}}
\WithSuffix\newcommand\rfsmglobal*{\rfsmgramnonterm{\rfsmglobal}}
\WithSuffix\newcommand\rfsmid*{\rfsmgramnonterm{\rfsmid}}
\WithSuffix\newcommand\rfsminstparamvalue*{\rfsmgramnonterm{\rfsminstparamvalue}}
\WithSuffix\newcommand\rfsmintannot*{\rfsmgramnonterm{\rfsmintannot}}
\WithSuffix\newcommand\rfsmintconst*{\rfsmgramnonterm{\rfsmintconst}}
\WithSuffix\newcommand\rfsmio*{\rfsmgramnonterm{\rfsmio}}
\WithSuffix\newcommand\rfsmiodesc*{\rfsmgramnonterm{\rfsmiodesc}}
\WithSuffix\newcommand\rfsmitransition*{\rfsmgramnonterm{\rfsmitransition}}
\WithSuffix\newcommand\rfsmlhs*{\rfsmgramnonterm{\rfsmlhs}}
\WithSuffix\newcommand\rfsmoptinstparams*{\rfsmgramnonterm{\rfsmoptinstparams}}
\WithSuffix\newcommand\rfsmparam*{\rfsmgramnonterm{\rfsmparam}}
\WithSuffix\newcommand\rfsmparams*{\rfsmgramnonterm{\rfsmparams}}
\WithSuffix\newcommand\rfsmprio*{\rfsmgramnonterm{\rfsmprio}}
\WithSuffix\newcommand\rfsmprogram*{\rfsmgramnonterm{\rfsmprogram}}
\WithSuffix\newcommand\rfsmrecordconst*{\rfsmgramnonterm{\rfsmrecordconst}}
\WithSuffix\newcommand\rfsmrecordfield*{\rfsmgramnonterm{\rfsmrecordfield}}
\WithSuffix\newcommand\rfsmrecordfieldconst*{\rfsmgramnonterm{\rfsmrecordfieldconst}}
\WithSuffix\newcommand\rfsmscalarconst*{\rfsmgramnonterm{\rfsmscalarconst}}
\WithSuffix\newcommand\rfsmsimpleexpr*{\rfsmgramnonterm{\rfsmsimpleexpr}}
\WithSuffix\newcommand\rfsmstimuli*{\rfsmgramnonterm{\rfsmstimuli}}
\WithSuffix\newcommand\rfsmsubtractive*{\rfsmgramnonterm{\rfsmsubtractive}}
\WithSuffix\newcommand\rfsmtransition*{\rfsmgramnonterm{\rfsmtransition}}
\WithSuffix\newcommand\rfsmtypedecl*{\rfsmgramnonterm{\rfsmtypedecl}}
\WithSuffix\newcommand\rfsmtypeexpr*{\rfsmgramnonterm{\rfsmtypeexpr}}
\WithSuffix\newcommand\rfsmtypeindexexpr*{\rfsmgramnonterm{\rfsmtypeindexexpr}}
\WithSuffix\newcommand\rfsmvaluechange*{\rfsmgramnonterm{\rfsmvaluechange}}
\WithSuffix\newcommand\rfsmvar*{\rfsmgramnonterm{\rfsmvar}}
\WithSuffix\newcommand\rfsmvars*{\rfsmgramnonterm{\rfsmvars}}
\WithSuffix\newcommand\rfsmbraced*[1]{\rfsmbraced{#1}}
\WithSuffix\newcommand\rfsmmylist*{\rfsmgramfunc{\rfsmmylist}}
\WithSuffix\newcommand\rfsmmynonemptylist*{\rfsmgramfunc{\rfsmmynonemptylist}}
\WithSuffix\newcommand\rfsmmyseparatedlist*{\rfsmgramfunc{\rfsmmyseparatedlist}}
\WithSuffix\newcommand\rfsmmyseparatednonemptylist*{\rfsmgramfunc{\rfsmmyseparatednonemptylist}}
\WithSuffix\newcommand\rfsmoptional*{\rfsmgramfunc{\rfsmoptional}}
\WithSuffix\newcommand\rfsmparen*[1]{\rfsmparen{#1}}

\newcommand\rfsmgramopt[1]{[#1]}
\newcommand\rfsmgramplus[1]{#1\ensuremath{^+}}
\newcommand\rfsmgramstar[1]{#1\ensuremath{^*}}
\newcommand\rfsmgramseplist[2]{#2\ensuremath{_{\textnormal{#1}}^*}}
\newcommand\rfsmgramsepnelist[2]{#2\ensuremath{_{\textnormal{#1}}^+}}
\WithSuffix\newcommand\rfsmgramopt*[1]{\paren{\rfsmgramopt{#1}}}
\WithSuffix\newcommand\rfsmgramplus*[1]{\paren{\rfsmgramplus{#1}}}
\WithSuffix\newcommand\rfsmgramstar*[1]{\paren{\rfsmgramstar{#1}}}
\WithSuffix\newcommand\rfsmgramseplist*[2]{\paren{\rfsmgramseplist{#1}{#2}}}
\WithSuffix\newcommand\rfsmgramsepnelist*[2]{\paren{\rfsmgramsepnelist{#1}{#2}}}
