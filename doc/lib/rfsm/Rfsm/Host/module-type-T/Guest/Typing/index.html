<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Typing (rfsm.Rfsm.Host.T.Guest.Typing)</title><link rel="stylesheet" href="../../../../../../_odoc_support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../../../../_odoc_support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../../../../../index.html">rfsm</a> &#x00BB; <a href="../../../../index.html">Rfsm</a> &#x00BB; <a href="../../../index.html">Host</a> &#x00BB; <a href="../../index.html">T</a> &#x00BB; <a href="../index.html">Guest</a> &#x00BB; Typing</nav><header class="odoc-preamble"><h1>Module <code><span>Guest.Typing</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#typing-environment">Typing environment</a></li><li><a href="#low-level-interface-to-the-the-type-checking-engine">Low-level interface to the the type-checking engine</a></li><li><a href="#high-level-interface-to-the-type-checking-engine">High-level interface to the type-checking engine</a></li></ul></nav><div class="odoc-content"><div class="odoc-spec"><div class="spec module anchored" id="module-Syntax"><a href="#module-Syntax" class="anchor"></a><code><span><span class="keyword">module</span> Syntax</span><span> = <a href="../Syntax/index.html">Syntax</a></span></code></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Types"><a href="#module-Types" class="anchor"></a><code><span><span class="keyword">module</span> Types</span><span> = <a href="../Types/index.html">Types</a></span></code></div></div><h4 id="typing-environment"><a href="#typing-environment" class="anchor"></a>Typing environment</h4><div class="odoc-spec"><div class="spec type anchored" id="type-env"><a href="#type-env" class="anchor"></a><code><span><span class="keyword">type</span> env</span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-mk_env"><a href="#val-mk_env" class="anchor"></a><code><span><span class="keyword">val</span> mk_env : <span>unit <span class="arrow">&#45;&gt;</span></span> <a href="#type-env">env</a></span></code></div><div class="spec-doc"><p><code>mk_env ()</code> should return the <em>initial</em> typing environment. This environment should contain, in particular, bindings for builtins primitives, type and value constructors.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-lookup_var"><a href="#val-lookup_var" class="anchor"></a><code><span><span class="keyword">val</span> lookup_var : <span>loc:<a href="../../../../Location/index.html#type-t">Location.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../../../../Ident/index.html#type-t">Ident.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Types/index.html#type-typ">Types.typ</a></span></code></div><div class="spec-doc"><p><code>lookup_var l x env</code> should return the type bound to identifier <code>x</code> in environment <code>env</code>. The behaviour when <code>x</code> is not bound in <code>env</code> is left to guest definition. A possibility is to raise <a href="../../../../Ident/index.html#exception-Undefined"><code>Ident.Undefined</code></a> for example.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_var"><a href="#val-add_var" class="anchor"></a><code><span><span class="keyword">val</span> add_var : <span>scope:<a href="../../../../Ident/index.html#type-scope">Ident.scope</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="../../../../Ident/index.html#type-t">Ident.t</a> * <a href="../Types/index.html#type-typ">Types.typ</a>)</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-env">env</a></span></code></div><div class="spec-doc"><p><code>add_var scope env (x,t)</code> should return the environment obtained by the binding <code>(x,t)</code> to <code>env</code>. The <code>scope</code> parameter is a hint to the guest type inference system. Typically, it will be used to determine, in the case the added type contains type variables, whether these variables will be generalized (<code>scope=Local</code>) or not (<code>scope=Global</code>). The behaviour when <code>x</code> is already bound in <code>env</code> is left to guest definition.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-add_param"><a href="#val-add_param" class="anchor"></a><code><span><span class="keyword">val</span> add_param : <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> <span><span>(<a href="../../../../Ident/index.html#type-t">Ident.t</a> * <a href="../Syntax/index.html#type-expr">Syntax.expr</a>)</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-env">env</a></span></code></div><div class="spec-doc"><p><code>add_param env (x,t)</code> should return the environment obtained by the binding <code>(x,t)</code> as a <em>model parameter</em> to <code>env</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-pp_env"><a href="#val-pp_env" class="anchor"></a><code><span><span class="keyword">val</span> pp_env : <span><span class="xref-unresolved">Stdlib</span>.Format.formatter <span class="arrow">&#45;&gt;</span></span> <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>pp_env fmt env</code> should print a readable representation of typing environment <code>env</code> on formatter <code>fmt</code>.</p></div></div><h4 id="low-level-interface-to-the-the-type-checking-engine"><a href="#low-level-interface-to-the-the-type-checking-engine" class="anchor"></a>Low-level interface to the the type-checking engine</h4><div class="odoc-spec"><div class="spec value anchored" id="val-type_check"><a href="#val-type_check" class="anchor"></a><code><span><span class="keyword">val</span> type_check : <span>loc:<a href="../../../../Location/index.html#type-t">Location.t</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Types/index.html#type-typ">Types.typ</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Types/index.html#type-typ">Types.typ</a> <span class="arrow">&#45;&gt;</span></span> unit</span></code></div><div class="spec-doc"><p><code>type_check loc t t'</code> should be called whenever types <code>t</code> and <code>t'</code> have to be unified at program location <code>loc</code>.</p></div></div><h4 id="high-level-interface-to-the-type-checking-engine"><a href="#high-level-interface-to-the-type-checking-engine" class="anchor"></a>High-level interface to the type-checking engine</h4><div class="odoc-spec"><div class="spec value anchored" id="val-type_type_decl"><a href="#val-type_type_decl" class="anchor"></a><code><span><span class="keyword">val</span> type_type_decl : <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Syntax/index.html#type-type_decl">Syntax.type_decl</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-env">env</a></span></code></div><div class="spec-doc"><p><code>type_type_decl env td</code> should return the typing environment obtained by type checking the type declaration <code>td</code> in environment <code>env</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-type_expression"><a href="#val-type_expression" class="anchor"></a><code><span><span class="keyword">val</span> type_expression : <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Syntax/index.html#type-expr">Syntax.expr</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Types/index.html#type-typ">Types.typ</a></span></code></div><div class="spec-doc"><p><code>type_expression env e</code> should return the type of expression <code>e</code> in environment <code>env</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-type_of_type_expr"><a href="#val-type_of_type_expr" class="anchor"></a><code><span><span class="keyword">val</span> type_of_type_expr : <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Syntax/index.html#type-type_expr">Syntax.type_expr</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Types/index.html#type-typ">Types.typ</a></span></code></div><div class="spec-doc"><p><code>type_of_type_expr env te</code> should return the type denoted by the type expression <code>te</code> in environment <code>env</code>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-type_lhs"><a href="#val-type_lhs" class="anchor"></a><code><span><span class="keyword">val</span> type_lhs : <span><a href="#type-env">env</a> <span class="arrow">&#45;&gt;</span></span> <span><a href="../Syntax/index.html#type-lhs">Syntax.lhs</a> <span class="arrow">&#45;&gt;</span></span> <a href="../Types/index.html#type-typ">Types.typ</a></span></code></div><div class="spec-doc"><p><code>type_lhs env l</code> should return the type of LHS <code>l</code> in environment <code>env</code>.</p></div></div></div></body></html>