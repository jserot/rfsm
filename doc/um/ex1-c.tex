\chapter*{Appendix C1 - Example of generated C code}  
\label{cha:ex1-c}

This is the code generated from program given in Listing~\ref{lst:rfsm-gensig} 

\begin{lstlisting}[language=ctask,frame=single,numbers=none,basicstyle=\small]
task g4(
  in event h;
  in int e;
 out int s;
  )
{
  int k;
  enum {E0,E1} state = E0;
  s=0;
  while ( 1 ) {
    switch ( state ) {
    case E1:
      wait_ev(h);
      if ( k<4 ) {
        k=k+1;
        }
      else if ( k==4 ) {
        s=0;
        state = E0;
        }
      break;
    case E0:
      wait_ev(h);
      if ( e==1 ) {
        k=1;
        s=1;
        state = E1;
        }
      break;
    }
  }
};
\end{lstlisting}
%%% Local Variables: 
%%% mode: latex
%%% TeX-master: "rfsm"
%%% End: 
