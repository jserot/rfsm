\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{grammar-defns}

\RequirePackage{suffix}
\RequirePackage{longtable}
\RequirePackage{tabu}

\newenvironment{rfsmgrammar}{
  \begin{trivlist}
    \item[]
      \begin{longtabu}{r@{}c@{}X@{}}
}{
      \end{longtabu}
  \end{trivlist}
}

\newcommand\rfsmgramsp{\quad}
\newcommand\rfsmgramdef{$\rfsmgramsp::=\rfsmgramsp$}
\newcommand\rfsmgrambar{$\rfsmgramsp|\rfsmgramsp$}
\newcommand\rfsmgrameps{\ensuremath{\epsilon}}
\newcommand\rfsmgramnonterm[1]{\ensuremath{\langle\textnormal{#1}\rangle}}
\newcommand\rfsmgramfunc[1]{\rfsmgramnonterm{#1}}
\newcommand\rfsmgramterm[1]{#1}

\newcommand\rfsmTYPE{\Verb|\textbf{type}|}
\newcommand\rfsmFUNCTION{\Verb|\textbf{function}|}
\newcommand\rfsmRETURN{\Verb|\textbf{return}|}
\newcommand\rfsmARROWEND{\Verb|\textbf{->}|}
\newcommand\rfsmARROWSTART{\Verb|\textbf{--}|}
\newcommand\rfsmBAR{\Verb+\textbf{|}+}
\newcommand\rfsmCOLEQ{\Verb|\textbf{:=}|}
\newcommand\rfsmCOLON{\Verb|\textbf{:}|}
\newcommand\rfsmCOMMA{\Verb|\textbf{,}|}
\newcommand\rfsmDIV{\Verb|\textbf{/}|}
\newcommand\rfsmFDIV{\Verb|\textbf{/.}|}
\newcommand\rfsmDOT{\Verb|\textbf{.}|}
\newcommand\rfsmEOF{EOF}
\newcommand\rfsmEQUAL{\Verb|\textbf{=}|}
\newcommand\rfsmFSM{\Verb|\textbf{fsm}|}
\newcommand\rfsmGT{\Verb|\textbf{>}|}
\newcommand\rfsmGTE{\Verb|\textbf{>=}|}
\newcommand\rfsmLID{lid}
\newcommand\rfsmUID{uid}
\newcommand\rfsmTRUE{true}
\newcommand\rfsmFALSE{false}
\newcommand\rfsmIN{\Verb|\textbf{in}|}
\newcommand\rfsmINPUT{\Verb|\textbf{input}|}
\newcommand\rfsmINOUT{\Verb|\textbf{inout}|}
\newcommand\rfsmINT{int}
\newcommand\rfsmFLOAT{float}
\newcommand\rfsmITRANS{\Verb|\textbf{itrans}|}
\newcommand\rfsmQMARK{\Verb|\textbf{?}|}
\newcommand\rfsmLBRACE{\Verb|\textbf{\{}|}
\newcommand\rfsmLPAREN{\Verb|\textbf{(}|}
\newcommand\rfsmLBRACKET{\Verb|\textbf{[}|}
\newcommand\rfsmLT{\Verb|\textbf{<}|}
\newcommand\rfsmLTE{\Verb|\textbf{<=}|}
\newcommand\rfsmMINUS{\Verb|\textbf{-}|}
\newcommand\rfsmFMINUS{\Verb|\textbf{-.}|}
\newcommand\rfsmMOD{\Verb|\textbf{\%}|}
\newcommand\rfsmMODEL{\Verb|\textbf{model}|}
\newcommand\rfsmNOTEQUAL{\Verb|\textbf{!=}|}
\newcommand\rfsmOUT{\Verb|\textbf{out}|}
\newcommand\rfsmOUTPUT{\Verb|\textbf{output}|}
\newcommand\rfsmPERIODIC{\Verb|\textbf{periodic}|}
\newcommand\rfsmPLUS{\Verb|\textbf{+}|}
\newcommand\rfsmFPLUS{\Verb|\textbf{+.}|}
\newcommand\rfsmRBRACE{\Verb|\textbf{\}}|}
\newcommand\rfsmRBRACKET{\Verb|\textbf{]}|}
\newcommand\rfsmRPAREN{\Verb|\textbf{)}|}
\newcommand\rfsmSEMICOLON{\Verb|\textbf{;}|}
\newcommand\rfsmSHARED{\Verb|\textbf{shared}|}
\newcommand\rfsmSPORADIC{\Verb|\textbf{sporadic}|}
\newcommand\rfsmSTATES{\Verb|\textbf{states}|}
\newcommand\rfsmTIMES{\Verb|\textbf{*}|}
\newcommand\rfsmFTIMES{\Verb|\textbf{*.}|}
\newcommand\rfsmTRANS{\Verb|\textbf{trans}|}
\newcommand\rfsmTYBOOL{\Verb|\textbf{bool}|}
\newcommand\rfsmTYEVENT{\Verb|\textbf{event}|}
\newcommand\rfsmTYINT{\Verb|\textbf{int}|}
\newcommand\rfsmTYFLOAT{\Verb|\textbf{float}|}
\newcommand\rfsmTYARRAY{\Verb|\textbf{array}|}
\newcommand\rfsmVALUECHANGES{\Verb|\textbf{value\_changes}|}
\newcommand\rfsmVARS{\Verb|\textbf{vars}|}
\newcommand\rfsmaction{action}
\newcommand\rfsmactions{actions}
\newcommand\rfsmbool{bool}
\newcommand\rfsmcondition{condition}
\newcommand\rfsmconst{const}
\newcommand\rfsmexpr{expr}
\newcommand\rfsmfarg{farg}
\newcommand\rfsmfbody{fbody}
\newcommand\rfsmfndecl{fn\_decl}
\newcommand\rfsmfres{fres}
\newcommand\rfsmfsminst{fsm\_inst}
\newcommand\rfsmfsmmodel{fsm\_model}
\newcommand\rfsmglobal{global}
\newcommand\rfsmguard{guard}
\newcommand\rfsmguardexpr{guard\_expr}
\newcommand\rfsmid{id}
\newcommand\rfsmintrange{int\_range}
\newcommand\rfsmio{io}
\newcommand\rfsmlhs{lhs}
\newcommand\rfsmiodesc{io\_desc}
\newcommand\rfsmitransition{itransition}
\newcommand\rfsmmylist{my\_list}
\newcommand\rfsmmynonemptylist{my\_nonempty\_list}
\newcommand\rfsmmyseparatedlist{my\_separated\_list}
\newcommand\rfsmmyseparatednonemptylist{my\_separated\_nonempty\_list}
\newcommand\rfsmoptinstparams{opt\_inst\_params}
\newcommand\rfsmoptional{optional}
\newcommand\rfsmparam{param}
\newcommand\rfsmparams{params}
\newcommand\rfsmprio{prio}
\newcommand\rfsmprogram{program}
\newcommand\rfsmstimuli{stimuli}
\newcommand\rfsmtransition{transition}
\newcommand\rfsmtyp{typ}
\newcommand\rfsmtypedecl{type\_decl}
\newcommand\rfsmtypeindexexpr{type\_index\_expr}
\newcommand\rfsmvaluechange{value\_change}
\newcommand\rfsmvar{var}
\newcommand\rfsmvars{vars}
\WithSuffix\newcommand\rfsmlhs*{\rfsmgramnonterm{\rfsmlhs}}
\WithSuffix\newcommand\rfsmFUNCTION*{\rfsmgramterm{\rfsmFUNCTION}}
\WithSuffix\newcommand\rfsmRETURN*{\rfsmgramterm{\rfsmRETURN}}
\WithSuffix\newcommand\rfsmARROWEND*{\rfsmgramterm{\rfsmARROWEND}}
\WithSuffix\newcommand\rfsmARROWSTART*{\rfsmgramterm{\rfsmARROWSTART}}
\WithSuffix\newcommand\rfsmBAR*{\rfsmgramterm{\rfsmBAR}}
\WithSuffix\newcommand\rfsmCOLEQ*{\rfsmgramterm{\rfsmCOLEQ}}
\WithSuffix\newcommand\rfsmCOLON*{\rfsmgramterm{\rfsmCOLON}}
\WithSuffix\newcommand\rfsmCOMMA*{\rfsmgramterm{\rfsmCOMMA}}
\WithSuffix\newcommand\rfsmDIV*{\rfsmgramterm{\rfsmDIV}}
\WithSuffix\newcommand\rfsmFDIV*{\rfsmgramterm{\rfsmFDIV}}
\WithSuffix\newcommand\rfsmDOT*{\rfsmgramterm{\rfsmDOT}}
\WithSuffix\newcommand\rfsmEOF*{\rfsmgramterm{\rfsmEOF}}
\WithSuffix\newcommand\rfsmEQUAL*{\rfsmgramterm{\rfsmEQUAL}}
\WithSuffix\newcommand\rfsmFALSE*{\rfsmgramterm{\rfsmFALSE}}
\WithSuffix\newcommand\rfsmFSM*{\rfsmgramterm{\rfsmFSM}}
\WithSuffix\newcommand\rfsmGT*{\rfsmgramterm{\rfsmGT}}
\WithSuffix\newcommand\rfsmGTE*{\rfsmgramterm{\rfsmGTE}}
\WithSuffix\newcommand\rfsmIN*{\rfsmgramterm{\rfsmIN}}
\WithSuffix\newcommand\rfsmINOUT*{\rfsmgramterm{\rfsmINOUT}}
\WithSuffix\newcommand\rfsmINPUT*{\rfsmgramterm{\rfsmINPUT}}
\WithSuffix\newcommand\rfsmINT*{\rfsmgramterm{\rfsmINT}}
\WithSuffix\newcommand\rfsmFLOAT*{\rfsmgramterm{\rfsmFLOAT}}
\WithSuffix\newcommand\rfsmITRANS*{\rfsmgramterm{\rfsmITRANS}}
\WithSuffix\newcommand\rfsmLBRACE*{\rfsmgramterm{\rfsmLBRACE}}
\WithSuffix\newcommand\rfsmLBRACKET*{\rfsmgramterm{\rfsmLBRACKET}}
\WithSuffix\newcommand\rfsmLID*{\rfsmgramterm{\rfsmLID}}
\WithSuffix\newcommand\rfsmLPAREN*{\rfsmgramterm{\rfsmLPAREN}}
\WithSuffix\newcommand\rfsmLT*{\rfsmgramterm{\rfsmLT}}
\WithSuffix\newcommand\rfsmLTE*{\rfsmgramterm{\rfsmLTE}}
\WithSuffix\newcommand\rfsmMINUS*{\rfsmgramterm{\rfsmMINUS}}
\WithSuffix\newcommand\rfsmFMINUS*{\rfsmgramterm{\rfsmFMINUS}}
\WithSuffix\newcommand\rfsmMOD*{\rfsmgramterm{\rfsmMOD}}
\WithSuffix\newcommand\rfsmMODEL*{\rfsmgramterm{\rfsmMODEL}}
\WithSuffix\newcommand\rfsmNOTEQUAL*{\rfsmgramterm{\rfsmNOTEQUAL}}
\WithSuffix\newcommand\rfsmOUT*{\rfsmgramterm{\rfsmOUT}}
\WithSuffix\newcommand\rfsmOUTPUT*{\rfsmgramterm{\rfsmOUTPUT}}
\WithSuffix\newcommand\rfsmPERIODIC*{\rfsmgramterm{\rfsmPERIODIC}}
\WithSuffix\newcommand\rfsmPLUS*{\rfsmgramterm{\rfsmPLUS}}
\WithSuffix\newcommand\rfsmFPLUS*{\rfsmgramterm{\rfsmFPLUS}}
\WithSuffix\newcommand\rfsmQMARK*{\rfsmgramterm{\rfsmQMARK}}
\WithSuffix\newcommand\rfsmRBRACE*{\rfsmgramterm{\rfsmRBRACE}}
\WithSuffix\newcommand\rfsmRBRACKET*{\rfsmgramterm{\rfsmRBRACKET}}
\WithSuffix\newcommand\rfsmRPAREN*{\rfsmgramterm{\rfsmRPAREN}}
\WithSuffix\newcommand\rfsmSEMICOLON*{\rfsmgramterm{\rfsmSEMICOLON}}
\WithSuffix\newcommand\rfsmSHARED*{\rfsmgramterm{\rfsmSHARED}}
\WithSuffix\newcommand\rfsmSPORADIC*{\rfsmgramterm{\rfsmSPORADIC}}
\WithSuffix\newcommand\rfsmSTATES*{\rfsmgramterm{\rfsmSTATES}}
\WithSuffix\newcommand\rfsmTIMES*{\rfsmgramterm{\rfsmTIMES}}
\WithSuffix\newcommand\rfsmFTIMES*{\rfsmgramterm{\rfsmFTIMES}}
\WithSuffix\newcommand\rfsmTRANS*{\rfsmgramterm{\rfsmTRANS}}
\WithSuffix\newcommand\rfsmTRUE*{\rfsmgramterm{\rfsmTRUE}}
\WithSuffix\newcommand\rfsmTYBOOL*{\rfsmgramterm{\rfsmTYBOOL}}
\WithSuffix\newcommand\rfsmTYEVENT*{\rfsmgramterm{\rfsmTYEVENT}}
\WithSuffix\newcommand\rfsmTYINT*{\rfsmgramterm{\rfsmTYINT}}
\WithSuffix\newcommand\rfsmTYFLOAT*{\rfsmgramterm{\rfsmTYFLOAT}}
\WithSuffix\newcommand\rfsmTYPE*{\rfsmgramterm{\rfsmTYPE}}
\WithSuffix\newcommand\rfsmUID*{\rfsmgramterm{\rfsmUID}}
\WithSuffix\newcommand\rfsmVALUECHANGES*{\rfsmgramterm{\rfsmVALUECHANGES}}
\WithSuffix\newcommand\rfsmVARS*{\rfsmgramterm{\rfsmVARS}}
\WithSuffix\newcommand\rfsmaction*{\rfsmgramnonterm{\rfsmaction}}
\WithSuffix\newcommand\rfsmactions*{\rfsmgramnonterm{\rfsmactions}}
\WithSuffix\newcommand\rfsmbool*{\rfsmgramnonterm{\rfsmbool}}
\WithSuffix\newcommand\rfsmcondition*{\rfsmgramnonterm{\rfsmcondition}}
\WithSuffix\newcommand\rfsmconst*{\rfsmgramnonterm{\rfsmconst}}
\WithSuffix\newcommand\rfsmexpr*{\rfsmgramnonterm{\rfsmexpr}}
\WithSuffix\newcommand\rfsmfsminst*{\rfsmgramnonterm{\rfsmfsminst}}
\WithSuffix\newcommand\rfsmfsmmodel*{\rfsmgramnonterm{\rfsmfsmmodel}}
\WithSuffix\newcommand\rfsmglobal*{\rfsmgramnonterm{\rfsmglobal}}
\WithSuffix\newcommand\rfsmguard*{\rfsmgramnonterm{\rfsmguard}}
\WithSuffix\newcommand\rfsmguardexpr*{\rfsmgramnonterm{\rfsmguardexpr}}
\WithSuffix\newcommand\rfsmid*{\rfsmgramnonterm{\rfsmid}}
\WithSuffix\newcommand\rfsmintrange*{\rfsmgramnonterm{\rfsmintrange}}
\WithSuffix\newcommand\rfsmio*{\rfsmgramnonterm{\rfsmio}}
\WithSuffix\newcommand\rfsmfarg*{\rfsmgramnonterm{\rfsmfarg}}
\WithSuffix\newcommand\rfsmfres*{\rfsmgramnonterm{\rfsmfres}}
\WithSuffix\newcommand\rfsmfbody*{\rfsmgramnonterm{\rfsmfbody}}
\WithSuffix\newcommand\rfsmiodesc*{\rfsmgramnonterm{\rfsmiodesc}}
\WithSuffix\newcommand\rfsmitransition*{\rfsmgramnonterm{\rfsmitransition}}
\WithSuffix\newcommand\rfsmoptinstparams*{\rfsmgramnonterm{\rfsmoptinstparams}}
\WithSuffix\newcommand\rfsmparam*{\rfsmgramnonterm{\rfsmparam}}
\WithSuffix\newcommand\rfsmparams*{\rfsmgramnonterm{\rfsmparams}}
\WithSuffix\newcommand\rfsmprio*{\rfsmgramnonterm{\rfsmprio}}
\WithSuffix\newcommand\rfsmprogram*{\rfsmgramnonterm{\rfsmprogram}}
\WithSuffix\newcommand\rfsmstimuli*{\rfsmgramnonterm{\rfsmstimuli}}
\WithSuffix\newcommand\rfsmtransition*{\rfsmgramnonterm{\rfsmtransition}}
\WithSuffix\newcommand\rfsmtyp*{\rfsmgramnonterm{\rfsmtyp}}
\WithSuffix\newcommand\rfsmtypedecl*{\rfsmgramnonterm{\rfsmtypedecl}}
\WithSuffix\newcommand\rfsmfndecl*{\rfsmgramnonterm{\rfsmfndecl}}
\WithSuffix\newcommand\rfsmtypeindexexpr*{\rfsmgramnonterm{\rfsmtypeindexexpr}}
\WithSuffix\newcommand\rfsmvaluechange*{\rfsmgramnonterm{\rfsmvaluechange}}
\WithSuffix\newcommand\rfsmvar*{\rfsmgramnonterm{\rfsmvar}}
\WithSuffix\newcommand\rfsmvars*{\rfsmgramnonterm{\rfsmvars}}
\WithSuffix\newcommand\rfsmmylist*{\rfsmgramfunc{\rfsmmylist}}
\WithSuffix\newcommand\rfsmmynonemptylist*{\rfsmgramfunc{\rfsmmynonemptylist}}
\WithSuffix\newcommand\rfsmmyseparatedlist*{\rfsmgramfunc{\rfsmmyseparatedlist}}
\WithSuffix\newcommand\rfsmmyseparatednonemptylist*{\rfsmgramfunc{\rfsmmyseparatednonemptylist}}
\WithSuffix\newcommand\rfsmoptional*{\rfsmgramfunc{\rfsmoptional}}

\newcommand\rfsmbraced[1]{\rfsmLBRACE*{} #1 \rfsmRBRACE*{}}
\newcommand\rfsmparen[1]{\rfsmLPAREN*{} #1 \rfsmRPAREN*{}}
\newcommand\rfsmgramopt[1]{[#1]}
\newcommand\rfsmgramplus[1]{#1\ensuremath{^+}}
\newcommand\rfsmgramstar[1]{#1\ensuremath{^*}}
\newcommand\rfsmgramseplist[2]{#2\ensuremath{_{\textnormal{#1}}^*}}
\newcommand\rfsmgramsepnelist[2]{#2\ensuremath{_{\textnormal{#1}}^+}}
\WithSuffix\newcommand\rfsmgramopt*[1]{\paren{\rfsmgramopt{#1}}}
\WithSuffix\newcommand\rfsmgramplus*[1]{\paren{\rfsmgramplus{#1}}}
\WithSuffix\newcommand\rfsmgramstar*[1]{\paren{\rfsmgramstar{#1}}}
\WithSuffix\newcommand\rfsmgramseplist*[2]{\paren{\rfsmgramseplist{#1}{#2}}}
\WithSuffix\newcommand\rfsmgramsepnelist*[2]{\paren{\rfsmgramsepnelist{#1}{#2}}}
